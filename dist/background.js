(()=>{"use strict";console.log("background script loaded"),chrome.runtime.onMessage.addListener(((e,o,n)=>{if("query"===e.action)return fetch(`https://api.openai.com/v1/engines/davinci-codex/completions?prompt=${e.query}&max_tokens=1024&n=1&stop=%5B%22%5Cn%22%5D`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.API_KEY}`}}).then((e=>e.json())).then((e=>{console.log(e),n(e.choices[0].text)})).catch((e=>console.error(e))),!0}))})();